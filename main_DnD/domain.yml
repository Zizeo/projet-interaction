version: "3.1"


slots:
  current_room:
    type: float
    mappings:
      - type: custom
  equipement:
    type: text
    mappings:
      - type: custom
  skill:
    type: text
    mappings:
      - type: custom
  stats:
    type: text
    mappings:
      - type: custom
  class:
    type: text
    initial_value: occultiste
    mappings:
      - type: custom
  player_hp:
    type: float
    min_value: 0.0
    max_value:  8.0
    initial_value: 8
    mappings:
      - type: custom
  enemy_hp:
    type: float
    min_value: 0.0
    max_value:  12.0
    initial_value: 12
    mappings:
      - type: custom


  player_action:
    type: text
    mappings:
      - type: from_intent
        intent: 
          - attack
          - use_item
          - flee
        value: "{intent}"

  enemy_action:
    type: text
    mappings:
      - type: custom
  player_force:
    type: float
    mappings:
      - type: custom
  player_intelligence:
    type: float
    mappings:
      - type: custom
  player_agility:
    type: float
    mappings:
      - type: custom
  player_level:
    type: float
    min_value: -100.0
    max_value:  100.0
    initial_value: 1
    mappings:
      - type: custom
  combat_state:
    type: text
    initial_value: "ended"
    mappings:
      - type: custom

intents:
- attack
- use_item 
- flee
- start_combat
- end_combat
- choose_dice

entities:
  - action_player
  - equipement
  - skill
  - class 
  - actual_room
  - player_hp
  - enemy_hp
  - player_force
  - player_intelligence
  - player_agility
  - player_level
  - combat_state
  - type_dé

actions:
  - action_combat_turn
  - action_combat_start
  - action_combat_end
  - action_player_choice
  - action_set_player_action
  - action_validate_combat_form
  - action_class_response


responses:
  utter_combat_start:
    - text: "Le combat commence ! Vous avez {player_hp} points de vie. L'ennemi a {enemy_hp} points de vie."
  utter_player_choice_fight:
    - text: "Que voulez-vous faire ? (attaquer, défendre, utiliser un objet)"
  utter_victory:
    - text: "Vous avez vaincu l'ennemi ! Félicitations !"
  utter_defeat:
    - text: "Vous avez été vaincu. Mieux vaut vous entraîner davantage !"
  utter_enemy_turn:
    - text: "L'ennemi attaque ! Il vous reste {player_hp} points de vie."
  utter_stats:
    - text: |
            "Voici vos statistiques :
                - Vous avez {player_hp} points de vie
                - vous avez {player_force} en force
                - vous avez {player_intelligence} en intelligence
                - vous avez {player_agility} en dexterité"
  utter_step1:
    - text: "Vous arrivez dans une vaste plaine. Devant vous, un chemin mène à un imposant donjon. En levant les yeux, vous apercevez votre chat, sa petite silhouette se détache près d’une fenêtre. Mais horreur… une queue de dragon se balance nonchalamment à ses côtés. Près de l’entrée, un garde imposant vous barre le passage."
  
  utter_step1_fail:
    - text: "Oh non ! le garde vous a battu. vous ne retrouverez pas votre chat."
  utter_step1_success:
    - text: "Bravo! Vous avez vaincu le garde. Vous pouvez maintenant accéder à la porte du donjon."

  utter_step2:
    - text: "Devant vous se dresse une lourde porte ornée de sculptures mystérieuses et enlacée de lianes. Vous remarquez cependant qu’il vous est impossible d'escalader la tour avec les lianes. Vous remarquez un cadenas complexe comportant quatre boules de couleur. Pour avancer, vous devez déverrouiller ce cadenas."
utter_lost:
    - condition:
      - type: slot
        name: current_room
        value: 0
      text: ""
    - condition:
      - type: slot
        name: current_room
        value: 1
      text: ""
    - condition:
      - type: slot
        name: current_room
        value: 2
      text: "Avez vous pensé à fouiller le garde ?"
    - condition:
      - type: slot
        name: current_room
        value: 3
      text: ""
    - condition:
      - type: slot
        name: current_room
        value: 4
      text: ""


forms:
  combat_form:
    required_slots:
      - combat_state



