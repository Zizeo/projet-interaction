version: "3.1"

intents:
- attack
- use_item 
- flee
- start_combat
- end_combat
- lost
- help
- quit
- info_status
- info_choosen_action

entities:
  - action_player
  - equipement
  - skill
  - class 
  - actual_room
  - player_hp
  - enemy_hp
  - player_force
  - player_intelligence
  - player_agility
  - player_level
  - combat_state

slots:
  being_in_fight:
    type: float
    initial_value: 0
    mappings:
      - type: custom 
  current_room:
    type: float
    initial_value: 1
    mappings:
      - type: custom
  equipement:
    type: text
    mappings:
      - type: custom
  skill:
    type: text
    mappings:
      - type: custom
  stats:
    type: text
    mappings:
      - type: custom
  class:
    type: text
    initial_value: barbare
    mappings:
      - type: custom
  player_hp:
    type: float
    min_value: 0.0
    max_value:  12.0
    initial_value: 12
    mappings:
      - type: custom
  enemy_hp:
    type: float
    min_value: 0.0
    max_value:  12.0
    initial_value: 12
    mappings:
      - type: custom

  player_action:
    type: text
    mappings:
      - type: from_intent
        intent: 
          - attack
          - use_item
          - flee
        value: "{intent}"

  enemy_action:
    type: text
    mappings:
      - type: custom
  player_force:
    type: float
    mappings:
      - type: custom
  player_intelligence:
    type: float
    mappings:
      - type: custom
  player_agility:
    type: float
    mappings:
      - type: custom
  player_level:
    type: float
    min_value: -100.0
    max_value:  100.0
    initial_value: 1
    mappings:
      - type: custom
  combat_state:
    type: text
    initial_value: "ended"
    mappings:
      - type: custom

intents:
- attack
- use_item 
- flee
- start_combat
- end_combat
- choose_dice
- info_choosen_action
- info_status
- speech
- spell
- quit
- help
- lost

entities:
  - action_player
  - equipement
  - skill
  - class 
  - actual_room
  - player_hp
  - enemy_hp
  - player_force
  - player_intelligence
  - player_agility
  - player_level
  - combat_state
  - type_dé

actions:
  - action_combat_turn
  - action_combat_start
  - action_combat_end
  - action_player_choice
  - action_set_player_action
  - action_validate_combat_form
  - action_helping_player
  - action_class_response


responses:
  utter_combat_start:
    - text: "Le combat commence ! Vous avez {player_hp} points de vie. L'ennemi a {enemy_hp} points de vie."
  utter_player_choice_fight:
    - text: "Que voulez-vous faire ? (attaquer, défendre, utiliser un objet)"
  utter_victory:
    - text: "Vous avez vaincu l'ennemi ! Félicitations !"
  utter_defeat:
    - text: "Vous avez été vaincu. Mieux vaut vous entraîner davantage !"
  utter_enemy_turn:
    - text: "L'ennemi attaque ! Il vous reste {player_hp} points de vie."
  utter_stats:
    - text: |
            "Voici vos statistiques :
                - Vous avez {player_hp} points de vie
                - vous avez {player_force} en force
                - vous avez {player_intelligence} en intelligence
                - vous avez {player_agility} en dexterité"

  utter_step1:
    - text: |
            "Bonjour, aventurier, et bienvenue dans la quête intitulée : Le Choix Impossible. Vous allez incarner un héros confronté à des décisions critiques, des épreuves intenses et des énigmes mortelles. Votre but ? Retrouver votre chat disparu, qui semble être retenu en otage au sommet d'une tour, protégé par un dragon. Préparez-vous, le chemin ne sera pas sans embûches. Vous arrivez dans une vaste plaine. Devant vous, un chemin mène à un imposant donjon. En levant les yeux, vous apercevez votre chat, sa petite silhouette se détache près d’une fenêtre. Mais horreur… une queue de dragon se balance nonchalamment à ses côtés. Près de l’entrée, un garde imposant vous barre le passage."
  
  utter_step1_fail:
    - text: "Oh non ! le garde vous a battu. vous ne retrouverez pas votre chat."
  utter_step1_success:
    - text: "Bravo! Vous avez vaincu le garde. Vous pouvez maintenant accéder à la porte du donjon."

  utter_step2:
    - text: "Devant vous se dresse une lourde porte ornée de sculptures mystérieuses et enlacée de lianes. Vous remarquez cependant qu’il vous est impossible d'escalader la tour avec les lianes. Vous remarquez un cadenas complexe comportant quatre boules de couleur. Pour avancer, vous devez déverrouiller ce cadenas."
utter_lost:
    - condition:
      - type: slot
        name: current_room
        value: 0
      text: ""
    - condition:
      - type: slot
        name: current_room
        value: 1
      text: "Bah vous êtes en plein combat avec un garde. Battez vous jusqu'à la fin du combat. Pour rappel vous pouvez attaquer ou fuir."
    - condition:
      - type: slot
        name: current_room
        value: 2
      text: "Vous pouvez utiliser votre intelligence mais avez vous pensé à fouiller le garde ?"
    - condition:
      - type: slot
        name: current_room
        value: 3
      text: "Utiliser votre dextérité pour déjouer les pièges."
    - condition:
      - type: slot
        name: current_room
        value: 4
      text: "Vous avez choisi de sauver le dragon ou le chat. Combattez l'autre."




forms:
  combat_form:
    required_slots:
      - combat_state



