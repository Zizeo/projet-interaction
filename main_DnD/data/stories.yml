version: "3.1"

stories:
  - story: etape1
    steps:
      - intent: start_story
      - action: utter_step1
      - checkpoint: ckp_start_combat

  - story: etape2_fouiller
    steps:
      - intent: etape2
      - action: action_change_room
      - action: utter_step2
      - intent: fouiller_garde
      - action: utter_fouiller_garde

  - story: etape2_casser_cadenas
    steps:
      - intent: etape2
      - action: action_change_room
      - action: utter_step2
      - intent: choose_dice
      - action: action_class_response

  - story: etape3 
    steps:
    - intent: etape3
    - action: action_change_room
    - action: utter_step3
    - intent: choose_dice
    - action: action_class_response

  - story: etape4
    steps:
    - intent: etape4
    - action: utter_step4

  - story: etape4 sauver chat succes
    steps:
    - intent: sauver_chat
    - action: utter_step4_sauver_chat
    - checkpoint: ckp_start_combat
    - action: utter_step4_sauver_chat_succes

  - story: etape4 sauver chat echec
    steps:
    - intent: sauver_chat
    - action: utter_step4_sauver_chat
    - checkpoint: ckp_start_combat
    - action: utter_step4_sauver_chat_echec

  - story: etape4 sauver dragon succes
    steps:
    - intent: sauver_dragon
    - action: utter_step4_sauver_dragon
    - checkpoint: ckp_start_combat
    - action: utter_step4_sauver_dragon_succes

  - story: etape4 sauver dragon echec
    steps:
    - intent: sauver_dragon
    - action: utter_step4_sauver_dragon
    - checkpoint: ckp_start_combat
    - action: utter_step4_sauver_dragon_echec

  - story: Combat basique
    steps:
      - checkpoint: ckp_start_combat
      - intent: start_combat
      - action: action_combat_start
      - action: combat_form
      - action: action_player_choice
      - or:
        - intent: attack
        - intent: spell
        - intent: use_item
        - intent: flee
      - action: action_set_player_action
      - action: action_combat_turn
      - active_loop: combat_form

  - story: being lost
    steps:
      - intent: lost
      - action: utter_lost

  - story: player help
    steps:
    - intent: help
    - action: action_helping_player

