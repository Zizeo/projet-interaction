version: "3.1"

stories:
  - story: etape2_fouiller
    steps:
      - intent: speech
      - action: utter_step2
      - intent: fouiller_garde
      - action: utter_fouiller_garde

  - story: etape2_casser_cadenas
    steps:
      - intent: speech
      - action: utter_step2
      - intent: choose_dice
      - action: action_class_response

  - story: etape3 
    steps:
    - intent: etape3
    - action: utter_step3
    - intent: choose_dice
    - action: action_class_response
    - checkpoint: ckp_start_combat
    - checkpoint: ckp_end_combat

  - story: Combat basique
    steps:
      - checkpoint: ckp_start_combat
      - intent: start_combat
      - action: action_combat_start
      - action: combat_form
      - action: action_player_choice
      - or:
        - intent: attack
        - intent: spell
        - intent: use_item
        - intent: flee
      - action: action_set_player_action
      - action: action_combat_turn
      - active_loop: combat_form
      - checkpoint: ckp_end_combat

  - story: etape1
    steps:
      - intent: start_story
      - action: utter_step1
      - checkpoint: ckp_start_combat
      - checkpoint: ckp_end_combat

  - story: interactive_story_2
    steps:
    - intent: start_combat
    - action: action_combat_start
    - slot_was_set:
      - combat_state: ongoing
    - slot_was_set:
      - enemy_hp: 12
    - slot_was_set:
      - player_hp: 12
    - action: combat_form
    - active_loop: combat_form
    - slot_was_set:
      - combat_state: null
    - slot_was_set:
      - requested_slot: combat_state
    - intent: attack
    - slot_was_set:
      - player_action: '{intent}'
    - action: action_set_player_action
    - slot_was_set:
      - player_action: attack
    - action: action_combat_turn
    - slot_was_set:
      - player_hp: 10
    - slot_was_set:
      - enemy_hp: 9
    - slot_was_set:
      - player_action: null
    - intent: attack
    - slot_was_set:
      - player_action: '{intent}'
    - action: action_set_player_action
    - slot_was_set:
      - player_action: attack
    - action: action_combat_turn
    - slot_was_set:
      - player_hp: 8
    - slot_was_set:
      - enemy_hp: 6
    - slot_was_set:
      - player_action: null
    - intent: attack
    - slot_was_set:
      - player_action: '{intent}'
    - action: action_set_player_action
    - slot_was_set:
      - player_action: attack
    - action: action_combat_turn
    - slot_was_set:
      - player_hp: 8
    - slot_was_set:
      - enemy_hp: 1
    - slot_was_set:
      - player_action: null

  - story: being lost
    steps:
      - intent: lost
      - action: utter_lost

  - story: player help
    steps:
    - intent: help
    - action: action_helping_player

  - story: quitter jeu
    steps:
    - intent: quit
    - action: action_quitter

  - story: interactive_story_1
    steps:
    - intent: start_combat
    - action: action_combat_start
    - slot_was_set:
      - combat_state: ongoing
    - slot_was_set:
      - enemy_hp: 12
    - slot_was_set:
      - player_hp: 12
    - slot_was_set:
      - player_action: null
    - slot_was_set:
      - being_in_fight: 1
    - action: combat_form
    - active_loop: combat_form
    - slot_was_set:
      - requested_slot: null
    - active_loop: null
    - intent: attack
    - slot_was_set:
      - player_action: '{intent}'
    - action: action_set_player_action
    - slot_was_set:
      - player_action: attack
    - action: action_combat_turn
    - slot_was_set:
      - player_hp: 12
    - slot_was_set:
      - enemy_hp: 9
    - slot_was_set:
      - player_action: null
    - intent: attack
    - slot_was_set:
      - player_action: '{intent}'
    - action: action_set_player_action
    - slot_was_set:
      - player_action: attack
    - action: action_combat_turn
    - slot_was_set:
      - player_hp: 8
    - slot_was_set:
      - enemy_hp: 5
    - slot_was_set:
      - player_action: null

